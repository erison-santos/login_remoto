<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Central de Apps</title>

    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="background">
      <div class="shape"></div>
      <div class="shape"></div>
    </div>

    <div id="mensagemLogin"></div>

    <form action="/login" method="POST">
      <h3>Acesso Remoto</h3>

      <label for="username">Usuário</label>
      <input
        type="text"
        name="usuario"
        id="username"
        placeholder="Email"
        required
      />

      <label for="password">Senha</label>
      <input
        type="password"
        name="senha"
        id="password"
        placeholder="Senha"
        required
      />

      <button type="submit">Entrar</button>
    </form>

    <script>
      const url = new URL(window.location.href)
      const erro = url.searchParams.get("error")
      console.log(erro)
      if (erro === "1") {
        alert("Usuário não encontrado!")
        url.searchParams.delete("error")
        window.history.replaceState({}, document.title, url.pathname)
      } else if (erro === "2") {
          alert( "Usuário desativado. Entre em contato com o administrador.")
          url.searchParams.delete("error")
          window.history.replaceState({}, document.title, url.pathname)
      } else if (erro === "3") {
          alert( "Senha incorreta!")
          url.searchParams.delete("error")
          window.history.replaceState({}, document.title, url.pathname)
      }
    </script>
  </body>
</html>
